(window.webpackJsonp=window.webpackJsonp||[]).push([[182],{"./girnarsoft-react-common/widgets/usedCarDetails/UsedCarCityTypeahead.js":function(t,e,a){"use strict";var i=a("react"),s=a.n(i),l=a("./cd/utils/global.js"),o=a("./cd/configs/configs.js"),c=a.n(o),r=a("./girnarsoft-react-common/widgets/ReactTypeahead.js"),n=a("./node_modules/prop-types/index.js"),p=a.n(n),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t};class h extends s.a.Component{constructor(t){super(t),this.state=d({},this.props),this.changeCityCb=this.changeCityCb.bind(this),this.APICallBack=this.APICallBack.bind(this),this.onBlur=this.onBlur.bind(this)}loadCities(t){let e=this;l.a.addPageScript((function(){l.a.getCityData(t.cities,(function(a,i){e.setChoices(a,i,t)}))}))}componentDidMount(){l.a.isEmptyObject(this.props.cities)||this.loadCities(this.props)}componentWillReceiveProps(t){this.props=t,l.a.isEmptyObject(t.cities)||this.loadCities(t)}setChoices(t,e){let a=this.context._T,i=l.a.getCookie("CityId"),s=this.props.city?this.props.city:l.a.getCurrentCity(),o=s;this.props.pickCurrentCityFromGlobal||""!=this.props.city||(s=""),this.props.hideParentCity&&(c.a.subCities.indexOf(i)>-1||this.props.askCity)&&(s="",o="");let r=t,n=e;if(this.props.showSelectedCityOnTop&&null!=s){let e=[],a=[],o=l.a.getCurrentCity(!0);for(let l in t)if(parseInt(t[l].id)==parseInt(i)||t[l].text.toLowerCase()==s.toLowerCase()||t[l]["group-parent"]==s||parseInt(i)==this.props.exceptionalCityDto.capitalCityId&&t[l]["group-parent"]==this.props.exceptionalCityDto.capitalRegion){if(!(this.props.city==this.props.exceptionalCityDto.capitalRegion||this.props.city!=this.props.exceptionalCityDto.capitalCity&&o!=this.props.exceptionalCityDto.capitalCity||t[l].text!=this.props.exceptionalCityDto.capitalRegion&&t[l]["group-parent"]!=this.props.exceptionalCityDto.capitalRegion)){a.push(t[l]);continue}e.push(t[l])}if(e&&e[0]&&e[0].isSubCity){let a=e[0]["group-parent"],s=e[0]["group-parent-id"],l=[];for(let e in t)(parseInt(t[e].id)==parseInt(s)||t[e].text.toLowerCase()==a.toLowerCase()||t[e]["group-parent"]==a||parseInt(i)==this.props.exceptionalCityDto.capitalCityId&&t[e]["group-parent"]==this.props.exceptionalCityDto.capitalRegion)&&l.push(t[e]);e=l}n=[],r=[...new Map(e.concat(a).map(t=>[t.text,t])).values()]}this.setState({allCities:r,popularCities:n,allList:t,popularList:e,city:s,cityId:i}),i&&i>0&&$("[data-selectcity]").text(o||"Select City").attr({title:o||"Select City"}),l.a.updateUsedCarHeader(s,a)}changeCityCb(t,e,a){let i=this.context._T,s=t.data("gsTaVal");l.a.updateUsedCarHeader(s.value,i),void 0!==s&&Object.keys(s).length>1&&"0"!==s.id&&"475"!==s.id&&($("[data-selectcity]").text(s.value),$("[data-selectcity]").attr({title:s.value?s.value:"Select City"}),l.a.setcitySessionCookie(s)),this.props.showSelectedCityOnTop&&this.setState({typeaheadStatus:!1,stopApiCallBack:!1}),"function"==typeof this.props.cb&&this.props.cb(t),window.urlCityId=0,l.a.setGtmTracking(t,{},a)}APICallBack(t,e){if(this.props.showSelectedCityOnTop){let a=this.state.allList,i=this.state.popularList;e({allList:a,popularList:i,stopApiCallBack:!0}),this.setState({allCities:a,popularCities:i,city:t,stopApiCallBack:!0,typeaheadStatus:!0})}}onBlur(t){let e=this;t.persist(),setTimeout(()=>{e.props.city!=t.target.value&&e.setState({city:e.props.city,typeaheadStatus:!1})},200)}render(){let t=this.props;return l.a.isEmptyObject(this.state.allCities)?null:s.a.createElement("div",{className:""+(this.props.addClass?this.props.addClass:"")},s.a.createElement("div",{className:"posR"},s.a.createElement("i",{className:"LocIcon zindex1 "+this.props.locationPinCls}),s.a.createElement("i",{className:"icon-cd_pencil "+this.props.pencilCls}),s.a.createElement("div",{className:" gs_ta smallInput","data-track-section":"Search by city"},s.a.createElement(r.a,d({},t,{cb:this.changeCityCb,selectedValue:"uccityName"==this.props.dataAttr?"":this.state.city?this.state.city:"",popularList:this.state.popularCities,allList:this.state.allCities,placeholder:this.props.placeholder,setValueBlank:!0},this.props.showSelectedCityOnTop?{showCityListOnClick:!0,typeaheadStatus:this.state.typeaheadStatus,stopApiCallBack:this.state.stopApiCallBack,APICallBack:this.APICallBack,onBlur:this.onBlur}:{})),s.a.createElement("div",{"data-typeahead-container":this.props.id,className:"typeHeadContainer gs_ta_header"}))))}}e.a=h,h.contextTypes={_T:p.a.func},h.defaultProps={allList:[],popularList:[],selectedValue:"",selectedObj:{},showDropdown:!0,id:"cityName",name:"cityName",clsLabel:"",setValueBlank:!0,locationPinCls:"",pencilCls:"",showSelectedCityOnTop:!1,exceptionalCityDto:{},pickCurrentCityFromGlobal:!0}},"./girnarsoft-react-common/widgets/usedCarDetails/UsedCarsByCity.js":function(t,e,a){"use strict";a.r(e);var i=a("./cd/configs/configs.js"),s=a.n(i),l=a("react"),o=a.n(l),c=a("./girnarsoft-react-common/elements/CLink.js"),r=a("./girnarsoft-react-common/elements/HGroup.js"),n=a("./girnarsoft-react-common/elements/HtmlTag.js"),p=a("./girnarsoft-react-common/elements/LazyLoad.js"),d=a("./girnarsoft-react-common/utils/detect.js"),h=a("./cd/utils/global.js"),C=a("./girnarsoft-react-common/widgets/usedCarDetails/UsedCarCityTypeahead.js"),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t};class m extends o.a.Component{constructor(t){super(t),this.state=u({},t),this.handleClick=this.handleClick.bind(this),this.cityChangeCB=this.cityChangeCB.bind(this)}componentDidMount(){let t=this;h.a.addPageScript(()=>{t.getCityData(t.props,(function(e,a){t.setState({allCities:e,popularCities:a})})),h.a.isEmptyObject(this.props.usedCarcities)&&"function"==typeof this.props.getUsedCarCities&&this.props.getUsedCarCities()})}updateCityCookie(t){h.a.setCookie("CityId",t.id,30);let e=h.a.getCookie("leadForm");""!=e&&void 0!==e?(void 0===e.choices&&(e.choices={}),void 0===e.formData&&(e.formData={}),e.formData.cityName=t.value?t.value:t.text,e.formData.cityId=t.id.toString()):e={choices:{},formData:{cityName:t.value?t.value:t.text,cityId:t.id.toString()}},h.a.setLocalStorageItem("citymid",t.id),localStorage.setItem("city_name",t.value),h.a.setCookie("leadForm",e,30)}getCityData(t,e){let a=[{label:t.allLabel,value:"all",header:!0}],i=[{label:"Popular Cities",value:"popular",header:!0,nosearch:!1}];var l=function(l){let o=[];o=void 0!==l.cities?l.cities:l;let c={},r=!1,n=!1;$.each(o,(function(e,l){if(s.a.excludeCitiName.indexOf(l[t.label])<0){if(c={label:l[t.label],value:l[t.slug]},r=void 0!==l.subCities,n=void 0!==l.groupcityregions,void 0!==l.id&&(h.a.CITY_ID_OBJECT[l.id]=l[t.label],c=Object.assign({},c,{CID:l.id,id:l.id})),1==l[t.popularKey]&&i.push(c),(r&&t.subCity||n)&&(c.group=!0),a.push(c),r&&t.subCity){let e=l.subCities;$.each(e,(function(e,s){h.a.CITY_ID_OBJECT[l.id+"#"+s.id]=s[t.label];let o={label:s[t.label],value:l[t.slug],RID:s.id,CRID:l.id+"#"+s.id,id:l.id+"#"+s.id,"group-parent":l[t.slug]};1==l[t.popularKey]&&i.push(o),a.push(o)}))}if(n){let e=l.groupcityregions;$.each(e,(function(e,i){h.a.CITY_ID_OBJECT[i.id]=i[t.label];let s={label:i[t.label],value:i[t.label],id:i.id,url:i.url?i.url:l.url,"group-parent":l[t.slug],"group-parent-id":l.id,isSubCity:!0};a.push(s)}))}}}));let p=i.concat(a);e(p,i)};void 0!==t.items?l(t.items):h.a.fetchUsedCarFilterData(l,t)}cityChangeCB(t){let e=t.data("gsTaVal");this.updateCityCookie(e),"function"!=typeof this.props.cityChangeCB?void 0!==this.props.cb&&this.props.cb(t):this.props.cityChangeCB(t)}handleClick(t){if(void 0!==t.id){let e={text:t.name?t.name:t.label,value:t.name?t.name:t.label,id:""+t.id,CID:""+t.id};h.a.setcitySessionCookie(e),h.a.setLocalStorageItem("citymid",t.id),localStorage.setItem("city_name",t.name)}window.__hasSessionCity=!0,void 0!==this.props.cb&&this.props.cb(!1)}render(){let t=this.props,e=t.slug,a=t.label,i=t.translatedLabel,l=t.items,m=void 0!==t.items?function(){let e=[];for(let a in l)1==l[a][t.popularKey]&&e.push(l[a]);return t.isLimited&&(e=e.slice(0,d.a.isMobile()?9:t.limit)),e}():t.ucPopularCities;return h.a.isEmptyObject(m)?null:o.a.createElement("section",{className:"cityBoxOuter usedcarcity shadow24 marginBottom20 listMain "+this.props.containerCls,"data-track-component":t.title},"right"==this.props.searchtype?o.a.createElement(r.a,{tag:t.tag,content:t.title}):"","top"==this.props.searchtype?o.a.createElement("div",{"data-track-section":"cityfilter","data-gsmtl-container":!0,className:"gsc_row"},o.a.createElement("div",{className:"gsc_col-xs-12 gsc_col-sm-6 marginBottom20"},o.a.createElement(r.a,{tag:t.tag,content:t.title})),o.a.createElement("div",{className:"gsc_col-xs-12 gsc_col-sm-6 marginBottom20"},o.a.createElement(C.a,u({},t,{popularList:this.state.popularCities,allList:this.state.allCities,textAttr:"text",label:"Search your city",cls:"customSelect",cb:this.cityChangeCB,id:"ucCityName",locationPinCls:"hide",pencilCls:"hide",city:"",cities:this.props.usedCarcities,enableParentSelection:!0,pickCurrentCityFromGlobal:!1}),"  ",o.a.createElement("span",{className:"icon-cd-locationPin"})))):"",o.a.createElement("div",{className:"gsc_row"},o.a.createElement(n.a,{tag:"ul","data-lazy":!0,className:"listing "+("right"==this.props.searchtype?"gsc_col-md-9 gsc_col-lg-9":"gsc_col-md-12 gsc_col-lg-12")},!h.a.isEmptyObject(m)&&m.map((l,r)=>o.a.createElement("li",{key:r,className:"gsc_col-xs-4 gsc_col-sm-3 gsc_col-md-2"},o.a.createElement(c.a,{slug:l[e],urlKey:"urlWithoutBackslash",default:t.defaultKey,title:void 0!==l.title?l.title:t.prefix+" "+l[a],onClick:t=>this.handleClick(l)},o.a.createElement("span",{className:"iconHolder"},o.a.createElement(p.a,{src:t.LocationPop?`${s.a.imgPath1}pwa/img/${l[a].replace(" ","").toLowerCase()+"New"}${t.logoExtension}`:this.props.isImageUrl?l[t.imgKey]:`${s.a.imgPath}${t.folderName}${l[a].replace(" ","-").toLowerCase()}${t.logoExtension}`,alt:l[i]?l[i]:l[a],"data-lazy":!0,type:"image",shimmer:!1})),t.prefix&&""!=t.prefix&&o.a.createElement(n.a,{tag:"span",className:"popularcity"},t.prefix),o.a.createElement(n.a,{tag:"span"},l[i]?l[i]:l[a]))))),"right"==this.props.searchtype?o.a.createElement("div",{"data-track-section":"cityfilter","data-gsmtl-container":!0,className:"clearfix cityBoxHead gsc_col-xs-12 gsc_col-sm-12 gsc_col-md-3 gsc_col-lg-3"},t.h3TagContent&&""!=t.h3TagContent&&o.a.createElement(r.a,{tag:"h3",className:"text",content:t.h3TagContent}),o.a.createElement(C.a,u({},t,{popularList:this.state.popularCities,allList:this.state.allCities,textAttr:"text",cls:"customSelect",label:"Enter your city",cb:this.cityChangeCB,id:"ucCityName",showCityListOnClick:!0,cities:this.props.usedCarcities,locationPinCls:"hide",pencilCls:"hide",city:"",enableParentSelection:!0,pickCurrentCityFromGlobal:!1}),o.a.createElement("span",{className:"icon-cd-locationPin"}))):""))}}m.defaultProps={slug:"value",label:"label",popularKey:"p",prefix:"Used cars in ",h3TagContent:"I am looking to buy a second hand car in",setCityCookie:!1,searchtype:"right",subCity:!1,allLabel:"All Cities",defaultKey:!1,dafaultHeight:330,defaultMobileHeight:342,tag:"h2",limit:9,isUrlWithSlash:"urlWithoutBackslash",logoExtension:".svg",folderName:"IconCityNew/",isImageUrl:!1,imgKey:"imgUrl",translatedLabel:"translatedLabel",containerCls:"",LocationPop:!1},e.default=m}}]);